<!DOCTYPE html>
<html>
<body>
<script type='text/javascript'>
var dt = 0.017;

var Vector = function(x, y) {
  this.x = x;
  this.y = y;
}

Vector.prototype.add = function(other) {
  out = new Vector(this.x + other.x, this.y + other.y);
  return out;
}

Vector.prototype.sub = function(other) {
  out = new Vector(this.x - other.x, this.y - other.y);
  return out;
}

Vector.prototype.mul = function(scalar) {
  out = new Vector(this.x * scalar, this.y * scalar);
  return out;
}

Vector.prototype.mag = function() {
  return Math.sqrt(this.x*this.x + this.y*this.y)
}

var Particle = function(pos, vel) {
  this.pos = pos;
  this.vel = vel;
}

Particle.prototype.update = function() {
  if(this.pos.x < radius || this.pos.x > 800-radius) {
    this.vel.x = -this.vel.x;
  }
  if(this.pos.y < radius || this.pos.y > 600-radius) {
    this.vel.y = -this.vel.y;
  }
  this.pos = this.pos.add(this.vel.mul(dt));
}

Particle.prototype.draw = function() {
  var ctx = document.getElementById('canvas').getContext('2d');
  var speed = this.vel.mag();
  ctx.fillStyle = 'rgb('+Math.floor(speed*20)+', 0,'+(255-Math.floor(speed*20))+')';
  ctx.strokeStyle = ctx.fillStyle;
  ctx.beginPath();
  ctx.arc(this.pos.x, this.pos.y, radius, 0, 2*Math.PI);
  ctx.fill();
}

var temp = 10;
var number = 50;
var particles = new Array(number);
var radius = 10;

function callback() {
  glob_update();
  glob_draw();
}

function glob_update() {
  particles.forEach(function(element, index, array) {element.update();});
}

function glob_draw() {
  var ctx = document.getElementById('canvas').getContext('2d');
  ctx.clearRect(0, 0, 800, 600);
  ctx.strokeStyle = "#000000";
  ctx.rect(0, 0, 800, 600);
  ctx.stroke();
  particles.forEach(function(element, index, array) {element.draw();});
}

window.onload = function() {
  for (i = 0; i < number; i++) {s
  setInterval(callback, dt*1000);
    x = Math.random()*(800-2*radius);
    y = Math.random()*(600-2*radius);
    u = (Math.random()*20)-10;
    v = (Math.random()*20)-10;
    particles[i] = new Particle(new Vector(x+radius, y+radius), new Vector(u, v));
  }
};
</script>
<h1>A sample of hot gas</h1>
<canvas id="canvas" width="800" height="600"></canvas>
</body>
</html>
